<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>블로그 글</title>
  <link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
  <!-- 글이 들어갈 자리 -->
  <section id="post-content"></section>

  <script>
    // posts.json 파일을 불러오기
    fetch("posts.json")
      .then(response => response.json()) // JSON 데이터를 자바스크립트 객체로 변환
      .then(posts => {
        // 주소창에서 ?id=값 읽어오기
        const urlParams = new URLSearchParams(window.location.search);
        const postId = urlParams.get("id");

        // posts.json 안에서 id가 같은 글 찾기
        const post = posts.find(p => p.id == postId);

        if (post) {
          // 글이 존재할 때 HTML 코드로 보여주기
          document.getElementById("post-content").innerHTML = `
            <header>
              <div class="title">
                <h2>${post.title}</h2>
                <!-- subtitle이 있을 때만 출력 -->
                ${post.subtitle ? `<p>${post.subtitle}</p>` : ""}
              </div>
              <div class="meta">
                <!-- 날짜가 있을 때만 출력 -->
                <time class="published">
                  ${post.date ? new Date(post.date).toLocaleDateString() : ""}
                </time>
                <!-- author(작성자)가 있을 때만 출력 -->
                ${
                  post.author
                    ? `<a href="#" class="author">
                        <!-- 이름이 있으면 표시 -->
                        <span class="name">${post.author.name || ""}</span>
                        <!-- 사진이 있으면 표시 -->
                        ${post.author.img ? `<img src="${post.author.img}" alt="" />` : ""}
                      </a>`
                    : ""
                }
              </div>
            </header>
            <!-- 대표 이미지(img)가 있을 때만 출력 -->
            ${
              post.img
                ? `<span class="image featured">
                     <img src="${post.img.src}" alt="${post.img.alt || ""}" />
                   </span>`
                : ""
            }
            <!-- 본문이 있으면 출력 -->
            ${post.content || ""}
          `;
        } else {
          // 글이 없으면 안내 메시지 출력
          document.getElementById("post-content").innerHTML =
            "<p>해당 글을 찾을 수 없습니다.</p>";
        }
      });
  </script>
</body>
</html>
